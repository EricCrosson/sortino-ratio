{"version":3,"file":"sortino-ratio.es.js","sources":["../src/index.js"],"sourcesContent":["/**\n * @method sortino\n * @summary Sortino ratio\n * @description Calculate a Sortino ratio - a measure of risk similar to Sharpe ratio based on downside deviation\n * \n * @param  {array} return_values asset/portfolio return values\n * @param  {number} target_return expected portfolio return (default 0)\n * @return {number}       \n *\n * @example\n * const return_values = [2, 1, -1, 18, 8, -2, 1, -1]\n *\n * sortino(return_values);\n * // 3.7527767497325675\n * \n */\n\nexport default function sortino (return_values, target_return = 0) {\n\n\t// 1)  Calculate the numerator of the \n\t// Sortino ratio, the average period \n\t// return minus the target return\n\tconst avg_return = return_values.reduce( ( a, b ) => a + b, 0 ) / return_values.length;\n\n\tconst sortino_numerator = avg_return - target_return\n\n\t// 2) For each data point, calculate\n\t// the difference between that data\n\t// point and the target level. For data\n\t// points above the target level, set\n\t// the difference to 0%. The result of\n\t// this step is the underperformance\n\t// data set\n\tconst underperformance = return_values.map( p => Math.min( target_return, p - target_return ) )\n\n\t// 3) Calculate the square of each\n\t// value in the underperformance data\n\t// set \n\tconst underperformance_squared = underperformance.map( p => Math.pow(p, 2) )\n\n\t// 4) Calculate the average of all\n\t// squared differences determined in\n\t// Step 3\n\tconst underperformance_squared_average = underperformance_squared.reduce( ( a, b ) => a + b, 0 ) / underperformance_squared.length\n\n\t// 5) Take the square root of the\n\t// average determined in Step 4. This\n\t// is the target downside deviation\n\t// used in the denominator of the\n\t// Sortino ratio\n\tconst target_downside_deviation = Math.sqrt(underperformance_squared_average)\n\n\t// 6) Calculate the Sortino ratio\n\tconst sortino_ratio = sortino_numerator / target_downside_deviation\n\n\treturn sortino_ratio\n}\n\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;AAiBA,AAAe,SAAS,OAAO,EAAE,aAAa,EAAE,aAAa,GAAG,CAAC,EAAE;;;;;CAKlE,MAAM,UAAU,GAAG,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,aAAa,CAAC,MAAM,CAAC;;CAEvF,MAAM,iBAAiB,GAAG,UAAU,GAAG,cAAa;;;;;;;;;CASpD,MAAM,gBAAgB,GAAG,aAAa,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,EAAE,aAAa,EAAE,CAAC,GAAG,aAAa,EAAE,GAAE;;;;;CAK/F,MAAM,wBAAwB,GAAG,gBAAgB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAE;;;;;CAK5E,MAAM,gCAAgC,GAAG,wBAAwB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,wBAAwB,CAAC,OAAM;;;;;;;CAOlI,MAAM,yBAAyB,GAAG,IAAI,CAAC,IAAI,CAAC,gCAAgC,EAAC;;;CAG7E,MAAM,aAAa,GAAG,iBAAiB,GAAG,0BAAyB;;CAEnE,OAAO,aAAa;CACpB;;;;"}